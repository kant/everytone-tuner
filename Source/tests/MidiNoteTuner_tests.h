/*
  ==============================================================================

    MidiNoteTuner_tests.h
    Created: 14 Dec 2021 12:27:55pm
    Author:  Vincenzo

  ==============================================================================
*/

#pragma once
#include "TestsCommon.h"
#include "../MidiNoteTuner.h"

class MidiNoteTuner_Test : public EverytoneTunerUnitTest
{
private:

    void test_tuner(MidiNoteTuner* tuner, int startChannelIndex, int endChannelIndex, const bool* expectedPitchMapped, const int* expectedCoarseNotes, const int* expectedPitchbends, juce::String testName="")
    {
        for (int ch = startChannelIndex; ch < endChannelIndex; ch++)
        {
            int indexOffset = (ch - startChannelIndex) * 128;
            for (int note = 0; note < 128; note++)
            {
                int index = indexOffset + note;

                auto pitch = tuner->getMidiPitch(ch + 1, note);

                auto chStr = juce::String(ch + 1);
                auto noteStr = juce::String(note);
                auto indexStr = juce::String(index);
                auto detail = "[" + indexStr + "] " + "(" + chStr + ", " + noteStr + ")";

                expect_exact(expectedPitchMapped[index], pitch.mapped, testName + "pitch.mapped at " + detail);
                expect_exact(expectedCoarseNotes[index], pitch.coarse, testName + "pitch.coarse at " + detail);
                expect_exact(expectedPitchbends[index], pitch.pitchbend, testName + "pitch.pitchbend at " + detail);
            }
        }
    }

public:

    struct GetAndSetParams
    {
        int startChannel = 0;
        int endChannel = 16;

        MappedTuningTable* tuningSource;
        MappedTuningTable* tuningTarget;

        int pitchbendRange = 4;
        int altPitchbendRange = 2;

        const bool* expectedPitchMapped = nullptr;
        const int* expectedCoarseNotes = nullptr;

        const int* expectedPitchbends = nullptr;
        const int* expectedAltPitchbends = nullptr;
        const int* expectedMpeDefaultPitchbends = nullptr; // MPE default pitchbend range is 48 semitones
    };

    MidiNoteTuner_Test() : EverytoneTunerUnitTest("MidiNoteTuner") {};

    void runTest() override
    {
        defaultTuningTest();
        ode22Test();
        ode31Test();
    }

private:

    void doTesting(juce::String testName, GetAndSetParams params)
    {
        auto source = std::make_shared<MappedTuningTable>(*params.tuningSource);
        auto target = std::make_shared<MappedTuningTable>(*params.tuningTarget);

        auto tuner = std::make_unique<MidiNoteTuner>(source, target, params.pitchbendRange);

        beginTest(testName + " Getters");

        expect_pointers(static_cast<const TuningTable*>(source->getTuning()), tuner->tuningSource(), "tuningSource");
        expect_pointers(static_cast<const TuningTable*>(target->getTuning()), tuner->tuningTarget(), "tuningTarget");
        expect_pointers(static_cast<const TuningTableMap*>(source->getMapping()), tuner->mappingSource(), "mappingSource");
        expect_pointers(static_cast<const TuningTableMap*>(target->getMapping()), tuner->mappingTarget(), "mappingTarget");
        expect_exact(params.pitchbendRange, tuner->getPitchbendMax(), "pitchbendRange");

        beginTest(testName + " Setters");
        tuner->setPitchbendRange(params.altPitchbendRange);
        expect_exact(params.altPitchbendRange, tuner->getPitchbendMax(), "pitchbendRange");

        beginTest(testName + " Tuning");

        tuner->setPitchbendRange(params.pitchbendRange);
        test_tuner(tuner.get(), params.startChannel, params.endChannel, params.expectedPitchMapped, params.expectedCoarseNotes, params.expectedPitchbends);

        tuner->setPitchbendRange(params.altPitchbendRange);
        test_tuner(tuner.get(), params.startChannel, params.endChannel, params.expectedPitchMapped, params.expectedCoarseNotes, params.expectedAltPitchbends, "range= " + juce::String(params.altPitchbendRange) + " ");
        
        tuner->setPitchbendRange(96);
        test_tuner(tuner.get(), params.startChannel, params.endChannel, params.expectedPitchMapped, params.expectedCoarseNotes, params.expectedMpeDefaultPitchbends, "range=96 ");

        tuner = nullptr;
        target = nullptr;
        source = nullptr;
    }

public:

    void defaultTuningTest()
    {
        auto mappedTuning = MappedTuningTable::StandardTuning();

        const bool expectedPitchMapped[] = { true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true };
        const int expectedCoarseNotes[] = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127 };
        const int expectedBends[] = { 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192 };

        GetAndSetParams params =
        {
            2, 5, 
            mappedTuning.get(), mappedTuning.get(), 
            2, 7,
            expectedPitchMapped,
            expectedCoarseNotes,
            expectedBends,
            expectedBends,
            expectedBends
        };

        doTesting("Default", params);
    }

    void ode22Test()
    {
        auto stdTuning = MappedTuningTable::StandardTuning();

        auto ode22def = CentsDefinition::CentsDivisions(22.0, 1200.0, 261.6255653);        
        auto ode22atC262 = std::make_shared<TuningTable>(ode22def);

        int ch = 4;
        int note = 0;
        auto mapDef = TuningTableMap::LinearMappingDefinition(ch, note, ode22atC262->getRootIndex(), ode22atC262->getTuningTableSize());
        auto mapping = std::make_shared<TuningTableMap>(mapDef);
        auto ode22MappedTuning = std::make_unique<MappedTuningTable>(ode22atC262, mapping);

        const bool expectedPitchMapped[] = { true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true };
        const int expectedCoarseNotes[] = { 118, 118, 119, 119, 120, 121, 121, 122, 122, 123, 123, 124, 124, 125, 125, 126, 127, 127, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 13, 13, 14, 14, 15, 15, 16, 16, 17, 17, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 30, 31, 31, 32, 32, 33, 33, 34, 34, 35, 35, 36, 37, 37, 38, 38, 39, 39, 40, 40, 41, 41, 42, 43, 43, 44, 44, 45, 45, 46, 46, 47, 47, 48, 49, 49, 50, 50, 51, 51, 52, 52, 53, 53, 54, 55, 55, 56, 56, 57, 57, 58, 58, 59, 59, 60, 61, 61, 62, 62, 63, 63, 64, 64, 65, 65, 66, 67, 67, 68, 68, 69, 69, 70, 70, 71, 71, 72, 73, 73, 74, 74, 75, 75, 76, 76, 77, 77, 78, 79, 79, 80, 80, 81, 81, 82, 82, 83, 83, 84, 85, 85, 86, 86, 87, 87, 88, 88, 89, 89, 90, 91, 91, 92, 92, 93, 93, 94, 94, 95, 95, 96, 97, 97, 98, 98, 99, 99, 100, 100, 101, 101, 102, 103, 103, 104, 104, 105, 105, 106, 106, 107, 107, 108, 109, 109, 110, 110, 111, 111, 112, 112, 113, 113, 114, 115, 115, 116, 116, 117, 117, 118, 118, 119, 119, 120, 121, 121, 122, 122, 123, 123, 124, 124, 125, 125, 126, 127, 127, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 13, 13, 14, 14, 15, 15, 16, 16, 17, 17, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 30, 31, 31, 32, 32, 33, 33, 34, 34, 35, 35, 36, 37, 37, 38, 38, 39, 39, 40, 40, 41, 41, 42, 43, 43, 44, 44, 45, 45, 46, 46, 47, 47, 48, 49, 49, 50, 50, 51, 51, 52, 52, 53, 53, 54, 55, 55, 56, 56, 57, 57, 58, 58, 59, 59, 60, 61, 61, 62, 62, 63, 63, 64, 64, 65, 65, 66, 67, 67, 68, 68, 69, 69, 70, 70, 71, 71 };
        const int expectedBends[] = { 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054, 8192, 6330, 8564, 6703, 8937, 7075, 9309, 7447, 9681, 7820, 10054 };

        const int expectedAltBends[] = { 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916, 8192, 4468, 8937, 5213, 9681, 5958, 10426, 6703, 11171, 7447, 11916 };
        const int expectedMpeDefaultBends[] = { 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270, 8192, 8114, 8208, 8130, 8223, 8145, 8239, 8161, 8254, 8176, 8270 };

        GetAndSetParams params =
        {
            2, 5, stdTuning.get(), ode22MappedTuning.get(),
            4,
            2,
            expectedPitchMapped,
            expectedCoarseNotes,
            expectedBends,
            expectedAltBends,
            expectedMpeDefaultBends
        };

        doTesting("std -> 22edo", params);
    }

    void ode31Test()
    {
        auto stdTuning = MappedTuningTable::StandardTuning();

        auto ode31def = CentsDefinition::CentsDivisions(31.0, 1200.0, 440);
        auto ode31at440 = std::make_shared<TuningTable>(ode31def);

        int ch = 5;
        int note = 0;

        auto mapDef = MultichannelMap::PeriodicMappingDefinition(ode31at440->getVirtualSize(), ch, note, ode31at440->getRootIndex(), ode31at440->getTuningTableSize());
        auto mapping = std::make_shared<TuningTableMap>(mapDef);

        auto ode31MappedTuning = std::make_unique<MappedTuningTable>(ode31at440, mapping);

        const bool expectedPitchMapped[] = { true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true };
        const int expectedCoarseNotes[] = { 45, 45, 46, 46, 47, 47, 47, 48, 48, 48, 49, 49, 50, 50, 50, 51, 51, 52, 52, 52, 53, 53, 54, 54, 54, 55, 55, 55, 56, 56, 57, 57, 57, 58, 58, 59, 59, 59, 60, 60, 60, 61, 61, 62, 62, 62, 63, 63, 64, 64, 64, 65, 65, 66, 66, 66, 67, 67, 67, 68, 68, 69, 69, 69, 70, 70, 71, 71, 71, 72, 72, 72, 73, 73, 74, 74, 74, 75, 75, 76, 76, 76, 77, 77, 78, 78, 78, 79, 79, 79, 80, 80, 81, 81, 81, 82, 82, 83, 83, 83, 84, 84, 84, 85, 85, 86, 86, 86, 87, 87, 88, 88, 88, 89, 89, 90, 90, 90, 91, 91, 91, 92, 92, 93, 93, 93, 94, 94, 57, 57, 58, 58, 59, 59, 59, 60, 60, 60, 61, 61, 62, 62, 62, 63, 63, 64, 64, 64, 65, 65, 66, 66, 66, 67, 67, 67, 68, 68, 69, 69, 69, 70, 70, 71, 71, 71, 72, 72, 72, 73, 73, 74, 74, 74, 75, 75, 76, 76, 76, 77, 77, 78, 78, 78, 79, 79, 79, 80, 80, 81, 81, 81, 82, 82, 83, 83, 83, 84, 84, 84, 85, 85, 86, 86, 86, 87, 87, 88, 88, 88, 89, 89, 90, 90, 90, 91, 91, 91, 92, 92, 93, 93, 93, 94, 94, 95, 95, 95, 96, 96, 96, 97, 97, 98, 98, 98, 99, 99, 100, 100, 100, 101, 101, 102, 102, 102, 103, 103, 103, 104, 104, 105, 105, 105, 106, 106, 69, 69, 70, 70, 71, 71, 71, 72, 72, 72, 73, 73, 74, 74, 74, 75, 75, 76, 76, 76, 77, 77, 78, 78, 78, 79, 79, 79, 80, 80, 81, 81, 81, 82, 82, 83, 83, 83, 84, 84, 84, 85, 85, 86, 86, 86, 87, 87, 88, 88, 88, 89, 89, 90, 90, 90, 91, 91, 91, 92, 92, 93, 93, 93, 94, 94, 95, 95, 95, 96, 96, 96, 97, 97, 98, 98, 98, 99, 99, 100, 100, 100, 101, 101, 102, 102, 102, 103, 103, 103, 104, 104, 105, 105, 105, 106, 106, 107, 107, 107, 108, 108, 108, 109, 109, 110, 110, 110, 111, 111, 112, 112, 112, 113, 113, 114, 114, 114, 115, 115, 115, 116, 116, 117, 117, 117, 118, 118, 81, 81, 82, 82, 83, 83, 83, 84, 84, 84, 85, 85, 86, 86, 86, 87, 87, 88, 88, 88, 89, 89, 90, 90, 90, 91, 91, 91, 92, 92, 93, 93, 93, 94, 94, 95, 95, 95, 96, 96, 96, 97, 97, 98, 98, 98, 99, 99, 100, 100, 100, 101, 101, 102, 102, 102, 103, 103, 103, 104, 104, 105, 105, 105, 106, 106, 107, 107, 107, 108, 108, 108, 109, 109, 110, 110, 110, 111, 111, 112, 112, 112, 113, 113, 114, 114, 114, 115, 115, 115, 116, 116, 117, 117, 117, 118, 118, 119, 119, 119, 120, 120, 120, 121, 121, 122, 122, 122, 123, 123, 124, 124, 124, 125, 125, 126, 126, 126, 127, 127, 0, 0, 1, 1, 2, 2, 2, 3 };
        const int expectedBends[] = { 8192, 9778, 7267, 8853, 6342, 7928, 9513, 7003, 8588, 10174, 7663, 9249, 6739, 8324, 9910, 7399, 8985, 6474, 8060, 9645, 7135, 8721, 6210, 7796, 9381, 6871, 8456, 10042, 7531, 9117, 6606, 8192, 9778, 7267, 8853, 6342, 7928, 9513, 7003, 8588, 10174, 7663, 9249, 6739, 8324, 9910, 7399, 8985, 6474, 8060, 9645, 7135, 8721, 6210, 7796, 9381, 6871, 8456, 10042, 7531, 9117, 6606, 8192, 9778, 7267, 8853, 6342, 7928, 9513, 7003, 8588, 10174, 7663, 9249, 6739, 8324, 9910, 7399, 8985, 6474, 8060, 9645, 7135, 8721, 6210, 7796, 9381, 6871, 8456, 10042, 7531, 9117, 6606, 8192, 9778, 7267, 8853, 6342, 7928, 9513, 7003, 8588, 10174, 7663, 9249, 6739, 8324, 9910, 7399, 8985, 6474, 8060, 9645, 7135, 8721, 6210, 7796, 9381, 6871, 8456, 10042, 7531, 9117, 6606, 8192, 9778, 7267, 8853, 8192, 9778, 7267, 8853, 6342, 7928, 9513, 7003, 8588, 10174, 7663, 9249, 6739, 8324, 9910, 7399, 8985, 6474, 8060, 9645, 7135, 8721, 6210, 7796, 9381, 6871, 8456, 10042, 7531, 9117, 6606, 8192, 9778, 7267, 8853, 6342, 7928, 9513, 7003, 8588, 10174, 7663, 9249, 6739, 8324, 9910, 7399, 8985, 6474, 8060, 9645, 7135, 8721, 6210, 7796, 9381, 6871, 8456, 10042, 7531, 9117, 6606, 8192, 9778, 7267, 8853, 6342, 7928, 9513, 7003, 8588, 10174, 7663, 9249, 6739, 8324, 9910, 7399, 8985, 6474, 8060, 9645, 7135, 8721, 6210, 7796, 9381, 6871, 8456, 10042, 7531, 9117, 6606, 8192, 9778, 7267, 8853, 6342, 7928, 9513, 7003, 8588, 10174, 7663, 9249, 6739, 8324, 9910, 7399, 8985, 6474, 8060, 9645, 7135, 8721, 6210, 7796, 9381, 6871, 8456, 10042, 7531, 9117, 6606, 8192, 9778, 7267, 8853, 8192, 9778, 7267, 8853, 6342, 7928, 9513, 7003, 8588, 10174, 7663, 9249, 6739, 8324, 9910, 7399, 8985, 6474, 8060, 9645, 7135, 8721, 6210, 7796, 9381, 6871, 8456, 10042, 7531, 9117, 6606, 8192, 9778, 7267, 8853, 6342, 7928, 9513, 7003, 8588, 10174, 7663, 9249, 6739, 8324, 9910, 7399, 8985, 6474, 8060, 9645, 7135, 8721, 6210, 7796, 9381, 6871, 8456, 10042, 7531, 9117, 6606, 8192, 9778, 7267, 8853, 6342, 7928, 9513, 7003, 8588, 10174, 7663, 9249, 6739, 8324, 9910, 7399, 8985, 6474, 8060, 9645, 7135, 8721, 6210, 7796, 9381, 6871, 8456, 10042, 7531, 9117, 6606, 8192, 9778, 7267, 8853, 6342, 7928, 9513, 7003, 8588, 10174, 7663, 9249, 6739, 8324, 9910, 7399, 8985, 6474, 8060, 9645, 7135, 8721, 6210, 7796, 9381, 6871, 8456, 10042, 7531, 9117, 6606, 8192, 9778, 7267, 8853, 8192, 9778, 7267, 8853, 6342, 7928, 9513, 7003, 8588, 10174, 7663, 9249, 6739, 8324, 9910, 7399, 8985, 6474, 8060, 9645, 7135, 8721, 6210, 7796, 9381, 6871, 8456, 10042, 7531, 9117, 6606, 8192, 9778, 7267, 8853, 6342, 7928, 9513, 7003, 8588, 10174, 7663, 9249, 6739, 8324, 9910, 7399, 8985, 6474, 8060, 9645, 7135, 8721, 6210, 7796, 9381, 6871, 8456, 10042, 7531, 9117, 6606, 8192, 9778, 7267, 8853, 6342, 7928, 9513, 7003, 8588, 10174, 7663, 9249, 6739, 8324, 9910, 7399, 8985, 6474, 8060, 9645, 7135, 8721, 6210, 7796, 9381, 6871, 8456, 10042, 7531, 9117, 6606, 8192, 9778, 7267, 8853, 6342, 7928, 9513, 7003, 8588, 10174, 7663, 9249, 6739, 8324, 9910, 7399, 8985, 6474, 8060, 9645, 7135, 8721, 6210, 7796, 9381, 6871, 8456, 8588, 10174, 7663, 9249, 6739, 8324, 9910, 7399 };

        const int expectedAltBends[] = { 8192, 11363, 6342, 9513, 4492, 7663, 10835, 5814, 8985, 12156, 7135, 10306, 5285, 8456, 11627, 6606, 9778, 4757, 7928, 11099, 6078, 9249, 4228, 7399, 10570, 5549, 8721, 11892, 6871, 10042, 5021, 8192, 11363, 6342, 9513, 4492, 7663, 10835, 5814, 8985, 12156, 7135, 10306, 5285, 8456, 11627, 6606, 9778, 4757, 7928, 11099, 6078, 9249, 4228, 7399, 10570, 5549, 8721, 11892, 6871, 10042, 5021, 8192, 11363, 6342, 9513, 4492, 7663, 10835, 5814, 8985, 12156, 7135, 10306, 5285, 8456, 11627, 6606, 9778, 4757, 7928, 11099, 6078, 9249, 4228, 7399, 10570, 5549, 8721, 11892, 6871, 10042, 5021, 8192, 11363, 6342, 9513, 4492, 7663, 10835, 5814, 8985, 12156, 7135, 10306, 5285, 8456, 11627, 6606, 9778, 4757, 7928, 11099, 6078, 9249, 4228, 7399, 10570, 5549, 8721, 11892, 6871, 10042, 5021, 8192, 11363, 6342, 9513, 8192, 11363, 6342, 9513, 4492, 7663, 10835, 5814, 8985, 12156, 7135, 10306, 5285, 8456, 11627, 6606, 9778, 4757, 7928, 11099, 6078, 9249, 4228, 7399, 10570, 5549, 8721, 11892, 6871, 10042, 5021, 8192, 11363, 6342, 9513, 4492, 7663, 10835, 5814, 8985, 12156, 7135, 10306, 5285, 8456, 11627, 6606, 9778, 4757, 7928, 11099, 6078, 9249, 4228, 7399, 10570, 5549, 8721, 11892, 6871, 10042, 5021, 8192, 11363, 6342, 9513, 4492, 7663, 10835, 5814, 8985, 12156, 7135, 10306, 5285, 8456, 11627, 6606, 9778, 4757, 7928, 11099, 6078, 9249, 4228, 7399, 10570, 5549, 8721, 11892, 6871, 10042, 5021, 8192, 11363, 6342, 9513, 4492, 7663, 10835, 5814, 8985, 12156, 7135, 10306, 5285, 8456, 11627, 6606, 9778, 4757, 7928, 11099, 6078, 9249, 4228, 7399, 10570, 5549, 8721, 11892, 6871, 10042, 5021, 8192, 11363, 6342, 9513, 8192, 11363, 6342, 9513, 4492, 7663, 10835, 5814, 8985, 12156, 7135, 10306, 5285, 8456, 11627, 6606, 9778, 4757, 7928, 11099, 6078, 9249, 4228, 7399, 10570, 5549, 8721, 11892, 6871, 10042, 5021, 8192, 11363, 6342, 9513, 4492, 7663, 10835, 5814, 8985, 12156, 7135, 10306, 5285, 8456, 11627, 6606, 9778, 4757, 7928, 11099, 6078, 9249, 4228, 7399, 10570, 5549, 8721, 11892, 6871, 10042, 5021, 8192, 11363, 6342, 9513, 4492, 7663, 10835, 5814, 8985, 12156, 7135, 10306, 5285, 8456, 11627, 6606, 9778, 4757, 7928, 11099, 6078, 9249, 4228, 7399, 10570, 5549, 8721, 11892, 6871, 10042, 5021, 8192, 11363, 6342, 9513, 4492, 7663, 10835, 5814, 8985, 12156, 7135, 10306, 5285, 8456, 11627, 6606, 9778, 4757, 7928, 11099, 6078, 9249, 4228, 7399, 10570, 5549, 8721, 11892, 6871, 10042, 5021, 8192, 11363, 6342, 9513, 8192, 11363, 6342, 9513, 4492, 7663, 10835, 5814, 8985, 12156, 7135, 10306, 5285, 8456, 11627, 6606, 9778, 4757, 7928, 11099, 6078, 9249, 4228, 7399, 10570, 5549, 8721, 11892, 6871, 10042, 5021, 8192, 11363, 6342, 9513, 4492, 7663, 10835, 5814, 8985, 12156, 7135, 10306, 5285, 8456, 11627, 6606, 9778, 4757, 7928, 11099, 6078, 9249, 4228, 7399, 10570, 5549, 8721, 11892, 6871, 10042, 5021, 8192, 11363, 6342, 9513, 4492, 7663, 10835, 5814, 8985, 12156, 7135, 10306, 5285, 8456, 11627, 6606, 9778, 4757, 7928, 11099, 6078, 9249, 4228, 7399, 10570, 5549, 8721, 11892, 6871, 10042, 5021, 8192, 11363, 6342, 9513, 4492, 7663, 10835, 5814, 8985, 12156, 7135, 10306, 5285, 8456, 11627, 6606, 9778, 4757, 7928, 11099, 6078, 9249, 4228, 7399, 10570, 5549, 8721, 8985, 12156, 7135, 10306, 5285, 8456, 11627, 6606 };
        const int expectedMpeDefaultBends[] = { 8192, 8258, 8153, 8220, 8115, 8181, 8247, 8142, 8209, 8275, 8170, 8236, 8131, 8198, 8264, 8159, 8225, 8120, 8186, 8253, 8148, 8214, 8109, 8175, 8242, 8137, 8203, 8269, 8164, 8231, 8126, 8192, 8258, 8153, 8220, 8115, 8181, 8247, 8142, 8209, 8275, 8170, 8236, 8131, 8198, 8264, 8159, 8225, 8120, 8186, 8253, 8148, 8214, 8109, 8175, 8242, 8137, 8203, 8269, 8164, 8231, 8126, 8192, 8258, 8153, 8220, 8115, 8181, 8247, 8142, 8209, 8275, 8170, 8236, 8131, 8198, 8264, 8159, 8225, 8120, 8186, 8253, 8148, 8214, 8109, 8175, 8242, 8137, 8203, 8269, 8164, 8231, 8126, 8192, 8258, 8153, 8220, 8115, 8181, 8247, 8142, 8209, 8275, 8170, 8236, 8131, 8198, 8264, 8159, 8225, 8120, 8186, 8253, 8148, 8214, 8109, 8175, 8242, 8137, 8203, 8269, 8164, 8231, 8126, 8192, 8258, 8153, 8220, 8192, 8258, 8153, 8220, 8115, 8181, 8247, 8142, 8209, 8275, 8170, 8236, 8131, 8198, 8264, 8159, 8225, 8120, 8186, 8253, 8148, 8214, 8109, 8175, 8242, 8137, 8203, 8269, 8164, 8231, 8126, 8192, 8258, 8153, 8220, 8115, 8181, 8247, 8142, 8209, 8275, 8170, 8236, 8131, 8198, 8264, 8159, 8225, 8120, 8186, 8253, 8148, 8214, 8109, 8175, 8242, 8137, 8203, 8269, 8164, 8231, 8126, 8192, 8258, 8153, 8220, 8115, 8181, 8247, 8142, 8209, 8275, 8170, 8236, 8131, 8198, 8264, 8159, 8225, 8120, 8186, 8253, 8148, 8214, 8109, 8175, 8242, 8137, 8203, 8269, 8164, 8231, 8126, 8192, 8258, 8153, 8220, 8115, 8181, 8247, 8142, 8209, 8275, 8170, 8236, 8131, 8198, 8264, 8159, 8225, 8120, 8186, 8253, 8148, 8214, 8109, 8175, 8242, 8137, 8203, 8269, 8164, 8231, 8126, 8192, 8258, 8153, 8220, 8192, 8258, 8153, 8220, 8115, 8181, 8247, 8142, 8209, 8275, 8170, 8236, 8131, 8198, 8264, 8159, 8225, 8120, 8186, 8253, 8148, 8214, 8109, 8175, 8242, 8137, 8203, 8269, 8164, 8231, 8126, 8192, 8258, 8153, 8220, 8115, 8181, 8247, 8142, 8209, 8275, 8170, 8236, 8131, 8198, 8264, 8159, 8225, 8120, 8186, 8253, 8148, 8214, 8109, 8175, 8242, 8137, 8203, 8269, 8164, 8231, 8126, 8192, 8258, 8153, 8220, 8115, 8181, 8247, 8142, 8209, 8275, 8170, 8236, 8131, 8198, 8264, 8159, 8225, 8120, 8186, 8253, 8148, 8214, 8109, 8175, 8242, 8137, 8203, 8269, 8164, 8231, 8126, 8192, 8258, 8153, 8220, 8115, 8181, 8247, 8142, 8209, 8275, 8170, 8236, 8131, 8198, 8264, 8159, 8225, 8120, 8186, 8253, 8148, 8214, 8109, 8175, 8242, 8137, 8203, 8269, 8164, 8231, 8126, 8192, 8258, 8153, 8220, 8192, 8258, 8153, 8220, 8115, 8181, 8247, 8142, 8209, 8275, 8170, 8236, 8131, 8198, 8264, 8159, 8225, 8120, 8186, 8253, 8148, 8214, 8109, 8175, 8242, 8137, 8203, 8269, 8164, 8231, 8126, 8192, 8258, 8153, 8220, 8115, 8181, 8247, 8142, 8209, 8275, 8170, 8236, 8131, 8198, 8264, 8159, 8225, 8120, 8186, 8253, 8148, 8214, 8109, 8175, 8242, 8137, 8203, 8269, 8164, 8231, 8126, 8192, 8258, 8153, 8220, 8115, 8181, 8247, 8142, 8209, 8275, 8170, 8236, 8131, 8198, 8264, 8159, 8225, 8120, 8186, 8253, 8148, 8214, 8109, 8175, 8242, 8137, 8203, 8269, 8164, 8231, 8126, 8192, 8258, 8153, 8220, 8115, 8181, 8247, 8142, 8209, 8275, 8170, 8236, 8131, 8198, 8264, 8159, 8225, 8120, 8186, 8253, 8148, 8214, 8109, 8175, 8242, 8137, 8203, 8209, 8275, 8170, 8236, 8131, 8198, 8264, 8159 };

        GetAndSetParams params =
        {
            2, 6, 
            stdTuning.get(), ode31MappedTuning.get(),
            4, 2,
            expectedPitchMapped,
            expectedCoarseNotes,
            expectedBends,
            expectedAltBends,
            expectedMpeDefaultBends
        };

        doTesting("std -> 31edo", params);
    }

};